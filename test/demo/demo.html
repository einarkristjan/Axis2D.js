<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />

  <title> axis.js demo </title>

  <style>

    html {
      display: table;

      width: 100%;
      height: 100%;
    }

    body {
      display: table-cell;

      width: 100%;
      height: 100%;

      vertical-align: middle;
      text-align: center;

      overflow: hidden;
    }

    canvas {
      background: #000;
      color: #fff;
    }

  </style>

</head>
<body>

  <canvas>You need a browser that supports the Canvas element</canvas>
  <script>
    (function(){
      var canvas = document.querySelector('canvas'),
          ctx = canvas.getContext('2d');
      ctx.fillStyle = '#fff';
      ctx.textAlign = 'center';
      ctx.fillText('Loading...', canvas.width/2, canvas.height/2);
    })();

  </script>

  <script src="../../src/axis.js"></script>
  <script src="../../src/axis.gameworld.js"></script>
  <script src="../../src/axis.canvasrenderer.js"></script>
  <script src="../../src/axis.entitymanager.js"></script>
  <script src="../../src/axis.entity.js"></script>
  <script src="../../src/axis.entity.collider.js"></script>
  <script src="../../src/axis.collisionmanager.js"></script>
  <script src="../../src/axis.collisionmap.js"></script>

  <script>

(function(){
  // paul irish shim
  var requestAnimFrame = (function(){
    return  window.requestAnimationFrame       ||
            window.webkitRequestAnimationFrame ||
            window.mozRequestAnimationFrame    ||
            function( callback ){
              window.setTimeout(callback, 1000 / 60);
            };
  })();

  var width = 768,
      height = 576,
      canvas = document.querySelector('canvas'),
      renderer = new AXIS.CanvasRenderer(canvas, width, height),
      gameWorld = new AXIS.GameWorld({
        renderer: renderer,
        debug: true
      });

  function onWindowResize() {
    renderer.scaleTo(window.innerWidth, window.innerHeight);
  }

  window.addEventListener('resize', onWindowResize);

  // first run
  onWindowResize();

  new AXIS.CollisionMap(gameWorld, [
    [1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1],
    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
    [0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0],
    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1]
  ]);

  new AXIS.Entity(gameWorld, 40, 50, 0)
    .setCollider(100, 100)
    .addScript(function(){
      var that = this;
      setTimeout(function(){
        that.moveTo(250, 200);
      }, 500);
    });

  (function loop() {
    requestAnimFrame(loop);
    renderer.clear(width, height);
    gameWorld.update();
    gameWorld.draw();
  })();

})();

  </script>
</body>
</html>
